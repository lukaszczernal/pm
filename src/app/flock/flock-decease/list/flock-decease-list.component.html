<nav *ngIf="!hasInserts" class="row">
    <h3 class="text-xs-center">
        Aby wyświetlić prognozowaną listę upadków nalezy dodać przynajmniej jedno wstawienie.
    </h3>
    <ul class="nav text-xs-center">
        <li class="nav-item">
            <a routerLink="../insert" class="btn btn-primary" type="text">Dodaj wstawienie</a>
        </li>
    </ul>
</nav>

<table *ngIf="hasInserts" class="table table-hover table-outline m-b-0 hidden-sm-down">
    <thead class="thead-default">
        <tr>
            <th class="text-xs-center" rowspan="2">Dzień</th>
            <th class="text-xs-center" rowspan="2">Data</th>
            <th class="text-xs-right" rowspan="2">Upadki dzienne</th>
            <th class="text-xs-right" colspan="2">Upadki narastająco</th>
            <th class="text-xs-right">Norma</th>
            <th class="text-xs-right" rowspan="2">Stan stada</th>
        </tr>
        <tr>
            <th class="text-xs-right">szt</th>
            <th class="text-xs-right">%</th>
            <th class="text-xs-right">%</th>
        </tr>

    </thead>
    <tbody>

        <template ngFor let-item [ngForOf]="items" [ngForTrackBy]="item?.day">

            <tr>
                <td class="text-xs-center">
                    <span>{{ item.day }}</span>
                </td>
                <td class="text-xs-center">
                    <span>{{ item.date | date:'dd/MM/yy' }}</span>
                </td>
                <td class="text-xs-right">
                    <form #deceaseForm="ngForm"  (ngSubmit)="onDeceaseChange(deceaseForm)">
                        <input name="id" [ngModel]="item.deceaseItem.id" type="hidden">
                        <input name="flock" [ngModel]="item.deceaseItem.flock" type="hidden">
                        <input name="deceaseDate" [ngModel]="item.deceaseItem.deceaseDate" type="hidden">
                        <input name="quantity" [ngModel]="item.deceaseItem.quantity" type="number" (blur)="deceaseForm.ngSubmit.emit()">
                    </form>
                </td>
                <td class="text-xs-right">
                    <span>{{ item.deceaseTotal | number:'1.0-0' }} szt</span>
                </td>
                <td class="text-xs-right">
                    <span>{{ item.deceaseRate | percent:'1.2-2' }}</span>
                </td>
                <td class="text-xs-right"></td>
                <td class="text-xs-right">
                    <span>{{ item.flockQuantity | number:'1.0-0' }} szt</span>
                </td>
            </tr>

            <tr *ngIf="item.isLastWeekDay">
                <td class="text-xs-center">
                    <span>Tydzień: {{ item.day / 7 }}</span>
                </td>
                <td class="text-xs-right" colspan="2"></td>
                <td class="text-xs-right">
                    <span>{{ item.deceaseTotal | number:'1.0-0' }} szt</span>
                </td>
                <td class="text-xs-right">
                    <span>{{ (item.deceaseRate) | percent:'1.2-2' }}</span>
                </td>
                <td class="text-xs-right">
                    <span>{{ item.marketDeceaseRate | percent:'1.0-2' }}</span>
                </td>
                <td class="text-xs-right">
                    <span>{{ item.flockQuantity | number:'1.0-0' }} szt</span>
                </td>
            </tr>

            <!--TODO add summary-->

        </template>

    </tbody>
</table>


